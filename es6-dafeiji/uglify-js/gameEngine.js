"use strict";var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var gameEngine={ele:null,bullets:[],enemys:[],score:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("开始游戏");var e=new Plane;this.loading(function(){console.log("游戏加载完成"),e.init().move(),e.fire(),gameEngine.createEnemy(),gameEngine.collision(),score.style.display="block",gameEngine.listenKeybord(),gameEngine.moveBackground()})},loading:function(e){var n=document.createElement("div");this.ele.appendChild(n),n.className="logo";var t=document.createElement("div");this.ele.appendChild(t),t.className="load";var i=["images2/loading1.png","images2/loading2.png","images2/loading3.png"],l=0,a=setInterval(function(){if(l>=5)return clearInterval(a),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(t),void(e&&e());t.style.background="url("+i[++l%3]+") no-repeat"},500)},createEnemy:function(){this.timer_large=setInterval(function(){Math.random()>.7&&new Enemy(Enemy.prototype.ENEMY_TYPE_LARGE).init().move()},6e3),this.timer_middle=setInterval(function(){Math.random()>.5&&new Enemy(Enemy.prototype.ENEMY_TYPE_MIDDLE).init().move()},3e3),this.timer_small=setInterval(function(){new Enemy(Enemy.prototype.ENEMY_TYPE_SMALL).init().move()},1e3)},listenKeybord:function(){var e=0,n=0;document.onkeydown=function(t){37!=(t=t||event).keyCode&&65!=t.keyCode||(e=-10),38!=t.keyCode&&87!=t.keyCode||(n=-10),39!=t.keyCode&&68!=t.keyCode||(e=10),40!=t.keyCode&&83!=t.keyCode||(n=10)},document.onkeyup=function(t){37!=(t=t||event).keyCode&&65!=t.keyCode&&39!=t.keyCode&&68!=t.keyCode||(e=0),38!=t.keyCode&&87!=t.keyCode&&40!=t.keyCode&&83!=t.keyCode||(n=0)};var t=new Plane;this.keyTimer=setInterval(function(){var i=0,l=0;i=t.ele.offsetLeft+e,l=t.ele.offsetTop+n,i<=0?i=0:i>=gameEngine.ele.offsetWidth-t.ele.offsetWidth&&(i=gameEngine.ele.offsetWidth-t.ele.offsetWidth),l<=0?l=0:l>=gameEngine.ele.offsetHeight-t.ele.offsetHeight&&(l=gameEngine.ele.offsetHeight-t.ele.offsetHeight),t.ele.style.left=i+"px",t.ele.style.top=l+"px"},30)},collision:function(){var e=new Plane,n=this,t=setInterval(function(){for(var i=0;i<n.enemys.length;i++){for(var l=0;l<n.bullets.length;l++)isCrash(n.enemys[i].ele,n.bullets[l].ele)&&(n.bullets[l].boom(),n.bullets.splice(l--,1),n.enemys[i].hurt());if(isCrash(n.enemys[i].ele,e.ele))return clearInterval(t),void gameEngine.gameOver()}},30)},gameOver:function(){var e=new Plane,n=["images2/me_die1.png","images2/me_die2.png","images2/me_die3.png","images2/me_die4.png"],t=0,i=setInterval(function(){if(t>=n.length){clearInterval(i),gameEngine.ele.removeChild(e.ele),clearInterval(e.fireTimer),clearInterval(gameEngine.timer_large),clearInterval(gameEngine.timer_middle),clearInterval(gameEngine.timer_small),clearInterval(gameEngine.bgTimer),clearInterval(gameEngine.keyTimer);for(var l=0;l<gameEngine.enemys.length;l++)clearInterval(gameEngine.enemys[l].timer);return mask.style.display="block",void(p.innerHTML="本次总分："+gameEngine.score)}e.ele.style.background="url("+n[t++]+") no-repeat"},100)},moveBackground:function(){var e=0;this.bgTimer=setInterval(function(){gameEngine.ele.style.backgroundPositionY=e+++"px"},30)}},Father=function(){function e(){_classCallCheck(this,e),this.ele=null}return _createClass(e,[{key:"init",value:function(){}},{key:"move",value:function(){}},{key:"boom",value:function(){}}]),e}();